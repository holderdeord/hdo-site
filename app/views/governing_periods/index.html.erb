<div>
  <div class="page-header">
    <h1>Regjeringen</h1>
  </div>

  <div class="row-fluid">
    <% @governing_parties.each do |party| %>
      <div class="span4">
        <%= image_tag party.image_with_fallback.thumb('200x200').strip.url %>
      </div>
    <% end %>
  </div>
  <div class="row-fluid">
    <%= link_to 'Rediger', 'edit_gov_path', class: 'btn' %>
    <%= link_to 'Ny Regjering', 'edit_gov_path', new_gov: true, class: 'btn' %>
  </div>
</div>

<div style="padding-top: 20px;">
  <h1>Perioder</h1>
  <%= form_tag(governing_periods_url, :method => "put")  do %>
    <table class="table table-striped" id="governing-periods-table">
      <thead>
        <th>Parti</th>
        <th>Fra</th>
        <th>Til</th>
        <th></th>
      </thead>
      <tbody>
        <% @governing_periods.each do |gp| %>
          <%= hidden_field_tag "governing_periods[#{gp.id}]party_id", gp.party_id %>
          <tr>
            <td><%= gp.party.name %></td>
            <td><%= text_field_tag "governing_periods[#{gp.id}]start_date", gp.start_date %></td>
            <td><%= text_field_tag "governing_periods[#{gp.id}]end_date", gp.end_date %></td>
            <td><%= link_to 'Destroy', gp, method: :delete, data: { confirm: GoverningPeriod.human_attribute_name(:confirm_destroy) }, class: 'btn btn-danger' %></td>
          </tr>
        <% end %>
        <tr>
          <td><%= select "governing_periods[new]", 'party_id', Party.all(:order => :name).collect { |p| [p.name, p.id]} %></td>
          <td><%= text_field_tag "governing_periods[new]start_date", @new_period.start_date %></td>
          <td><%= text_field_tag "governing_periods[new]end_date", @new_period.end_date %></td>
          <td/>
        </tr>
      </tbody>
    </table>

    <div class="row-fluid">
      <%= submit_tag 'Lagre', class: 'btn btn-primary' %>
      <%= button_tag 'New', id: 'new-governing-period', class: 'btn' %>
    </div>
  <% end %>
</div>
